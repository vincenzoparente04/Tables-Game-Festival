<h2 mat-dialog-title>
      <mat-icon>add</mat-icon>
      Ajouter un jeu à la réservation
    </h2>

    <mat-dialog-content>
      <form [formGroup]="form" class="jeu-form">
        
        <mat-form-field appearance="outline">
          <mat-label>Jeu</mat-label>
          <mat-select formControlName="jeu_id" required>
            @for (jeu of jeux(); track jeu.id) {
              <mat-option [value]="jeu.id">
                <strong>{{ jeu.nom }}</strong>
                <span style="font-size: 12px; color: #666; margin-left: 8px;">
                  {{ jeu.editeur_nom }}
                </span>
              </mat-option>
            }
          </mat-select>
          <mat-icon matPrefix>extension</mat-icon>
          @if(form.get('jeu_id')?.hasError('required') && form.get('jeu_id')?.touched) {
            <mat-error>Sélectionnez un jeu</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Nombre d'exemplaires</mat-label>
          <input matInput type="number" formControlName="nombre_exemplaires" min="1" required>
          <mat-icon matPrefix>content_copy</mat-icon>
          <mat-hint>Combien d'exemplaires seront exposés</mat-hint>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Espace (en tables)</mat-label>
          <input matInput type="number" step="0.5" formControlName="tables_allouees" min="0.5" required>
          <mat-icon matPrefix>table_chart</mat-icon>
          <mat-hint>Espace estimé nécessaire ({{ tablesRestantes }} disponible(s))</mat-hint>
          @if(depassementTables) {
            <mat-error>Dépassement des tables disponibles</mat-error>
          }
        </mat-form-field>

      </form>
    </mat-dialog-content>

    <mat-dialog-actions align="end">
      <button mat-button (click)="onCancel()">Annuler</button>
      <button 
        mat-raised-button 
        color="primary" 
        [disabled]="form.invalid || depassementTables"
        (click)="onSubmit()">
        <mat-icon>add</mat-icon>
        Ajouter
      </button>
    </mat-dialog-actions>