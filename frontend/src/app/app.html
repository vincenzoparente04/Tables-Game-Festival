<mat-sidenav-container class="app-container">
  
  <mat-sidenav #sidenav class="app-sidenav" mode="side" [opened]="true">
    <div class="sidenav-header">
      <span class="logo">ðŸŽ²</span>
      <span>Festival Manager</span>
      <button mat-icon-button (click)="sidenav.close()" class="close-btn" title="Fermer le menu">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <nav class="sidenav-nav">
      @if(isLoggedIn()) {
        

        <a mat-button routerLink="home" routerLinkActive="active">
          <mat-icon>home</mat-icon>
          <span>Accueil</span>
        </a>
        
        @if(!isPendingUser()) {
          <a mat-button routerLink="vues-publiques" routerLinkActive="active">
            <mat-icon>visibility</mat-icon>
            <span>Vues publiques</span>
          </a>

          @if(isVisitorOrBenevole() && currentFestival()) {
            <a mat-button [routerLink]="['/festivals', currentFestival()!.id, 'zones-plan']" routerLinkActive="active">
              <mat-icon>map</mat-icon>
              <span>Zone plan</span>
            </a>
          }
          
          @if(canViewFestivals()) {
            <a mat-button routerLink="festivals" routerLinkActive="active">
              <mat-icon>event</mat-icon>
              <span>Festivals</span>
            </a>
          }

          @if (canViewgames()) {
            <a mat-button routerLink="jeux" routerLinkActive="active">
              <mat-icon>games</mat-icon>
              <span>Jeux</span>
            </a>
          }

          @if (canviewEditeurs()) {
            <a mat-button routerLink="editeurs" routerLinkActive="active">
              <mat-icon>people</mat-icon>
              <span>Ã‰diteurs</span>
            </a>
          }

          @if (canViewReservants()) {
            <a mat-button routerLink="reservants" routerLinkActive="active">
              <mat-icon>person_search</mat-icon>
              <span>RÃ©servants</span>
            </a>
          }
        }
        
        @if(isAdmin()) {
          <div style="margin-top: 12px;">
            <a mat-button routerLink="admin" routerLinkActive="active">
              <mat-icon>admin_panel_settings</mat-icon>
              <span>Admin</span>
            </a>
          </div>
        }
      }
    </nav>

    <div class="sidenav-footer">
      @if(isLoggedIn()) {
        <button mat-button class="logout-btn" (click)="logoutApp()">
          <mat-icon>logout</mat-icon>
          <span>DÃ©connexion</span>
        </button>
      } @else {
        <a mat-button routerLink="login" routerLinkActive="active">
          <mat-icon>login</mat-icon>
          <span>Connexion</span>
        </a>
        <a mat-button routerLink="register" routerLinkActive="active">
          <mat-icon>person_add</mat-icon>
          <span>Inscription</span>
        </a>
      }
    </div>
  </mat-sidenav>

  <mat-sidenav-content class="app-content">
    <mat-toolbar color="primary" class="main-toolbar">
      @if(!sidenav.opened) {
        <button mat-icon-button (click)="sidenav.open()" class="menu-toggle" title="Ouvrir le menu">
          <mat-icon>menu</mat-icon>
        </button>
      }
      <span class="toolbar-title"></span>
      <span class="spacer"></span>
    </mat-toolbar>
    
    <div class="router-container">
      <router-outlet></router-outlet>
    </div>
  </mat-sidenav-content>

</mat-sidenav-container>
