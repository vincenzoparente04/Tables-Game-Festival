<h2 mat-dialog-title>
  <mat-icon>{{ isEdit() ? 'edit' : 'add' }}</mat-icon>
  {{ submitLabel() }} une zone tarifaire
</h2>

<mat-dialog-content>
  <form [formGroup]="form" class="zone-form">
    
    <mat-form-field appearance="outline">
      <mat-label>Nom de la zone</mat-label>
      <input matInput formControlName="nom" placeholder="Ex: Zone Premium" required>
      <mat-icon matPrefix>label</mat-icon>
      @if(form.get('nom')?.hasError('required') && form.get('nom')?.touched) {
        <mat-error>Le nom est requis</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Nombre de tables (espace)</mat-label>
      <input matInput type="number" formControlName="nombre_tables_total" required>
      <mat-icon matPrefix>table_chart</mat-icon>
      @if(form.get('nombre_tables_total')?.hasError('required') && form.get('nombre_tables_total')?.touched) {
        <mat-error>Le nombre de tables est requis</mat-error>
      }
      @if(form.get('nombre_tables_total')?.hasError('min') && form.get('nombre_tables_total')?.touched) {
        <mat-error>Le nombre doit être supérieur à 0</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Prix par table (€)</mat-label>
      <input matInput type="number" formControlName="prix_table" required>
      <mat-icon matPrefix>euro</mat-icon>
      <span matSuffix>€</span>
      @if(form.get('prix_table')?.hasError('required') && form.get('prix_table')?.touched) {
        <mat-error>Le prix est requis</mat-error>
      }
      @if(form.get('prix_table')?.hasError('min') && form.get('prix_table')?.touched) {
        <mat-error>Le prix doit être positif</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Prix au m² (calculé automatiquement)</mat-label>
      <input matInput type="number" formControlName="prix_m2" readonly>
      <mat-icon matPrefix>straighten</mat-icon>
      <span matSuffix>€/m²</span>
      <mat-hint>1 table ≈ 4.5 m²</mat-hint>
    </mat-form-field>

  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button (click)="onCancel()">
    Annuler
  </button>
  <button 
    mat-raised-button 
    color="primary" 
    [disabled]="form.invalid"
    (click)="onSubmit()">
    <mat-icon>{{ isEdit() ? 'save' : 'add' }}</mat-icon>
    {{ submitLabel() }}
  </button>
</mat-dialog-actions>
